YUI.add("moodle-tinymce_mathslate-dialogue",function(e,t){M.tinymce_mathslate=M.tinymce_mathslate||{};var n={EDITOR:"mathslate-tinymce"},r=M.tinymce_mathslate;r.dialogue=null,r.selection=null,r.config=null,r.init=function(t){M.tinymce_mathslate=M.tinymce_mathslate||{},M.tinymce_mathslate.config=t.config||M.tinymce_mathslate.config,M.tinymce_mathslate.help=t.help||M.tinymce_mathslate.help;var i=e.one("#"+t.elementid);M.tinymce_mathslate.dialogue=i;var s=i.one(".mathslate-container").generateID();e.one("#"+s).addClass(n.EDITOR),typeof window.MathJax=="undefined"?window.MathJax={AuthorInit:function(){window.MathJax.Hub.Register.StartupHook("End",r.editorInit)}}:window.MathJax.Hub.Register.StartupHook("End",r.editorInit)},r.editorInit=function(){var t=M.tinymce_mathslate.dialogue.one(".mathslate-container").generateID(),n=new M.tinymce_mathslate.Editor("#"+t,M.tinymce_mathslate.config),r=e.one("#"+t).appendChild(e.Node.create('<button title="'+M.util.get_string("cancel_desc","tinymce_mathslate")+'">'+M.util.get_string("cancel","tinymce_mathslate")+"</button>"));r.on("click",function(){window.tinyMCEPopup.close()});var i=e.one("#"+t).appendChild(e.Node.create('<button title="'+M.util.get_string("display_desc","tinymce_mathslate")+'">'+M.util.get_string("display","tinymce_mathslate")+"</button>")),s=e.one("#"+t).appendChild(e.Node.create('<button title="'+M.util.get_string("inline_desc","tinymce_mathslate")+'">'+M.util.get_string("inline","tinymce_mathslate")+"</button>"));i.on("click",function(){window.tinyMCEPopup.editor.execCommand("mceInsertContent",!1,"\\["+n.output("tex")+"\\]"),window.tinyMCEPopup.close()}),s.on("click",function(){window.tinyMCEPopup.editor.execCommand("mceInsertContent",!1,"\\("+n.output("tex")+"\\)"),window.tinyMCEPopup.close()}),window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,n.node.generateID()])}},"@VERSION@",{requires:["escape","moodle-local_mathslate-editor","moodle-tinymce_mathslate-editor"]});
